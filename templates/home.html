<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marceau JACQUIN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
    
        .container {
            position: relative;
            width: 100vw; /* Prend toute la largeur de la fenÃªtre */
            height: 100vh; /* Prend toute la hauteur de la fenÃªtre */
            overflow: hidden; /* EmpÃªche le dÃ©bordement de l'image */
            display: flex; /* Utilisation du flexbox pour centrer le contenu */
            justify-content: center;
            align-items: center;
        }
        .text-nom { /*"Marceau Jacquin"*/
            position: absolute;
            display: flex;
            top: 1vw;
            left: 1vw;
            align-items: left; 
            z-index: 3;
        }
        .text-area { 
            position: absolute;
            bottom: 1vw;
            left: 1vw;
            max-width: 500px;            
            align-items: end;
        }
        .no-change {
            position: absolute;
            z-index: 10;
            cursor: pointer;
            background-color: transparent; /* Rendre la zone de protection invisible */
        }

        .clickable-area {
            position: fixed; /* Positionne l'Ã©lÃ©ment de maniÃ¨re fixe */
            top: 0px; /* Distance du haut de la page */
            right: 0px; /* Distance du bord droit de la page */
            width: 12%;
            height: 17%;
            text-align: end;
            line-height: 100px;
            cursor: pointer;
            z-index: 10; /* Assure que l'Ã©lÃ©ment est au-dessus d'autres Ã©lÃ©ments */
        }

        .text-info {/*"Projects/info"*/
            position: absolute;
            display: flex;
            top: 1vw;
            right: 1vw;
            align-items: right;
            font-size: 16px;
            z-index: 3;
        }

        .textinfo p {
            margin: 0;
        }
        .text-nom, .text-area, .text-info {
            /* EmpÃªche la sÃ©lection du texte */
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none;      /* IE 10+ */
            user-select: none;          /* Standard (Chrome, Firefox, Opera) */
            
            /* EmpÃªche aussi le menu contextuel "Copier" sur certains mobiles */
            -webkit-touch-callout: none; 
        }

        /* Ce code ne s'appliquera que si l'Ã©cran fait moins de 768px */
        @media (max-width: 768px) {
            /* Suppression de la zone de blocage sur mobile */
            .no-change {
                display: none !important;
            }

            /* Container flexible */
            .container {
                height: 100dvh;
                width: 100vw;
            }

            .container img {
                max-width: 100%;
                max-height: 100%;
                width: auto;
                height: auto;
                object-fit: contain;
            }

            .text-info {
                top: 5vw;
                right: 5vw;
                font-size: 14px;
            }

            /* Zone cliquable invisible : plus grande pour le confort tactile */
            .clickable-area {
                width: 25%;       /* Un quart de la largeur de l'Ã©cran max */
                max-width: 120px;
                height: 15%;      /* S'aligne sur la hauteur de la box info */
                max-height: 60px;
            }

            /* Box TEXTE IMAGE (Bas gauche) */
            .text-area {
                bottom: 15vw;
                left: 5vw;
                width: auto;
                height: auto;
                font-size: 14px;
            }
            .text-nom {
                top: 5vw;
                left: 5vw;
                font-size: 14px;
            }
            .container {
                height: 100dvh;
                width: 100vw;
                overflow: hidden;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .container img {
                /* On tourne l'image */
                transform: rotate(90deg);
                /* ATTENTION : Comme l'image est tournÃ©, 
                sa hauteur devient sa largeur et inversement.
                On utilise vh pour la largeur et vw pour la hauteur. */
                width: auto;
                height: auto;
                max-width: 95vh;  /* Limite la "largeur" (qui est la hauteur rÃ©elle de l'image) */
                max-height: 95vw; /* Limite la "hauteur" (qui est la largeur rÃ©elle de l'image) */
                object-fit: contain;
                pointer-events: none; /* Important pour le swipe */
            }
}
    </style>
</head>
<body>
    <div class="container" id="image-container">
        <img id="image" alt="Example Image" src="{{ url_for('static', filename='images/richardmille1.jpg') }}" draggable="false">

        <div class="text-area" id="text-area"></div> 
    </div>
    <div class="no-change" id="no-change"></div>
    <div class="clickable-area" id="info-btn" onclick="redirectToPage()"></div>
        <div class="text-info" id="text-info">Info</div>
        <div class="text-nom" id="text-nom">Marceau Jacquin</div>

    <script>
    function isMobileDevice() {
            return window.matchMedia("(pointer: coarse)").matches;
        }
        
        const IS_MOBILE = isMobileDevice();

        let touchStartX = 0;

        let touchEndX = 0;

        let currentIndex = 0;

        let isFirstImage = true;

        let preloadedImages = [];

        const imagesToPreload = [
            "{{ url_for('static', filename='images/richardmille1.jpg') }}",
            "{{ url_for('static', filename='images/richardmille2.jpg') }}",
            "{{ url_for('static', filename='images/richardmille3.jpg') }}",
            "{{ url_for('static', filename='images/richardmille4.jpg') }}",
            "{{ url_for('static', filename='images/richardmille5.jpg') }}",
            "{{ url_for('static', filename='images/richardmille6.jpg') }}",
            "{{ url_for('static', filename='images/petith1.jpg') }}",
            "{{ url_for('static', filename='images/petith2.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana1.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana2.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana3.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana4.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana5.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana6.jpg') }}",
            "{{ url_for('static', filename='images/destael1.jpg') }}",
            "{{ url_for('static', filename='images/destael2.jpg') }}",
            "{{ url_for('static', filename='images/destael3.jpg') }}",
            "{{ url_for('static', filename='images/destael4.jpg') }}",
            "{{ url_for('static', filename='images/destael5.jpg') }}",
            "{{ url_for('static', filename='images/destael6.jpg') }}",
            "{{ url_for('static', filename='images/victoire1.jpg') }}",
            "{{ url_for('static', filename='images/echec1.jpg') }}",
            "{{ url_for('static', filename='images/echec2.jpg') }}",
            "{{ url_for('static', filename='images/echec3.jpg') }}",
            "{{ url_for('static', filename='images/echec4.jpg') }}",
            "{{ url_for('static', filename='images/echec5.jpg') }}",
            "{{ url_for('static', filename='images/echec6.jpg') }}",
            "{{ url_for('static', filename='images/echec7.jpg') }}",
            "{{ url_for('static', filename='images/token1.jpg') }}",
            "{{ url_for('static', filename='images/token2.jpg') }}",
            "{{ url_for('static', filename='images/token3.jpg') }}",
            "{{ url_for('static', filename='images/token4.jpg') }}",
            "{{ url_for('static', filename='images/poster1.jpg') }}",
            "{{ url_for('static', filename='images/poster2.jpg') }}",
            "{{ url_for('static', filename='images/tag1.jpg') }}",
            "{{ url_for('static', filename='images/tag2.jpg') }}",
            "{{ url_for('static', filename='images/tag3.jpg') }}",
            "{{ url_for('static', filename='images/tag4.jpg') }}",
            "{{ url_for('static', filename='images/tag5.jpg') }}",
            "{{ url_for('static', filename='images/tag6.jpg') }}",
            "{{ url_for('static', filename='images/tag7.jpg') }}",
            "{{ url_for('static', filename='images/fromabove1.jpg') }}",
            "{{ url_for('static', filename='images/yvonlambert1.jpg') }}",
            "{{ url_for('static', filename='images/lagon1.jpg') }}",
            "{{ url_for('static', filename='images/lagon2.jpg') }}",
            "{{ url_for('static', filename='images/rebecq1.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire1.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire2.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire3.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire4.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire5.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire6.jpg') }}",
            "{{ url_for('static', filename='images/cover1.jpg') }}",
        ];

        const images = [
            {
                src: "{{ url_for('static', filename='images/richardmille1.jpg') }}",
                text: "1",
                class : "img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille2.jpg') }}",
                text: "2",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille3.jpg') }}",
                text: "3",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille4.jpg') }}",
                text: "4",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille5.jpg') }}",
                text: "5",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille6.jpg') }}",
                text: "6",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/petith1.jpg') }}",
                text: "7",
                class :"img-full"
            },
            {
                src: "{{ url_for('static', filename='images/petith2.jpg') }}",
                text: "8",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana1.jpg') }}",
                text: "9",
                class :"img-full",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana2.jpg') }}",
                text: "10",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana3.jpg') }}",
                text: "11",
                class :"img-white-HB",
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana4.jpg') }}",
                text: "12",
                class :"img-hotelhana4" 
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana5.jpg') }}",
                text: "13",
                class :"img-white-HB" 
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana6.jpg') }}",
                text: "14",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael1.jpg') }}",
                text: "15",
                class : "img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael2.jpg') }}",
                text: "16",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael3.jpg') }}",
                text: "17",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael4.jpg') }}",
                text: "18",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael5.jpg') }}",
                text: "19",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/destael6.jpg') }}",
                text: "20",
                class :"img-white-HB",
            },
            {
                src: "{{ url_for('static', filename='images/victoire1.jpg') }}",
                text: "21",
                class : "img-full",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/echec1.jpg') }}",
                text: "22",
                class : "img-black-cover",
                textClass : "text-white"

            },
            {
                src: "{{ url_for('static', filename='images/echec2.jpg') }}",
                text: "23",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/echec3.jpg') }}",
                text: "24",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/echec4.jpg') }}",
                text: "25",
                class : "img-black",
                textClass : "text-white"   
            },
            {
                src: "{{ url_for('static', filename='images/echec5.jpg') }}",
                text: "26",
                class : "img-black",
                textClass : "text-white"   
            },
            {
                src: "{{ url_for('static', filename='images/echec6.jpg') }}",
                text: "27",
                class : "img-black",
                textClass : "text-white"   
            },
            {
                src: "{{ url_for('static', filename='images/echec7.jpg') }}",
                text: "28",
                class : "img-black",
                textClass : "text-white"   
            },
            {
                src: "{{ url_for('static', filename='images/token1.jpg') }}",
                text: "29",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/token2.jpg') }}",
                text: "30",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/token3.jpg') }}",
                text: "31",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/token4.jpg') }}",
                text: "32",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/poster1.jpg') }}",                
                text: "33",
                class :"img-poster"
            },
            {
                src: "{{ url_for('static', filename='images/poster2.jpg') }}",
                text: "34",
                class :"img-poster"
            },
            {
                src: "{{ url_for('static', filename='images/tag1.jpg') }}",
                text: "35",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag2.jpg') }}",
                text: "36",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag3.jpg') }}",
                text: "37",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag4.jpg') }}",
                text: "38",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag5.jpg') }}",
                text: "39",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag6.jpg') }}",
                text: "40",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag7.jpg') }}",
                text: "41",
                class :"img-full"
            },
            {
                src: "{{ url_for('static', filename='images/fromabove1.jpg') }}",
                text: "42",
                class :"img-fromabove"
            },
            {
                src: "{{ url_for('static', filename='images/yvonlambert1.jpg') }}",
                text: "43",
                class : "img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/lagon1.jpg') }}",
                text: "44",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/lagon2.jpg') }}",
                text: "45",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/rebecq1.jpg') }}",
                text: "46",
                class : "img-rebecq"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire1.jpg') }}",
                text: "47",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire2.jpg') }}",
                text: "48",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire3.jpg') }}",
                text: "49",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire4.jpg') }}",
                text: "50",
                class : "img-black-cover",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire5.jpg') }}",
                text: "51",
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/vernaculaire6.jpg') }}",
                text: "52",
                class : "img-black-cover",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/cover1.jpg') }}",
                text: "53",
                class : "img-white-HB"
            }
       ];

function  updateContent() {
    const imageData = images[currentIndex];

    const imageElement = document.getElementById('image');
    const textArea = document.getElementById('text-area');
    const textnom = document.getElementById('text-nom');
    const textContainer = document.getElementById('text-info');

    function applyContent() {

        /* IMAGE */
        imageElement.className = '';
        imageElement.src = imageData.src;

        if (imageData.class) {
            imageElement.classList.add(imageData.class);
        }

        /* TEXTE */
        textArea.className = 'text-area';
        textnom.className = 'text-nom';
        textContainer.className = 'text-info';

        if (imageData.textClass) {
            textArea.classList.add(imageData.textClass);
            textnom.classList.add(imageData.textClass);
            textContainer.classList.add(imageData.textClass);
        }

        textArea.innerText = imageData.text;

        /* BACKGROUND */
        document.body.style.backgroundColor =
            imageData.class === "img-black" ? "black" : "";

        /* ZONES & PRELOAD */
        updateNoChangeZone();

        if (IS_MOBILE) {
            preloadSurroundingImages(currentIndex, 4);
        }
    }

    // ðŸ”¹ PREMIÃˆRE IMAGE â†’ affichage direct
    if (isFirstImage) {
        isFirstImage = false;
        applyContent();
        return;
    }

    // ðŸ”¹ IMAGES SUIVANTES â†’ preload sÃ©curisÃ©
    const tempImg = new Image();
    tempImg.onload = applyContent;
    tempImg.src = imageData.src;
}
                function preloadSurroundingImages(index, count = 4) {
                    const indices = [];
                    for (let i = 0; i <= count; i++) {
                        indices.push((index + i) % images.length);
                    }

                    indices.forEach(i => {
                        const img = new Image();
                        img.src = images[i].src;
                    });
                }


function enableDesktopMode() {
    console.log("Desktop mode enabled");

    // clic gauche / droite
    document.body.addEventListener('click', handleDesktopClick);

    // clavier
    document.addEventListener('keydown', handleDesktopKeyboard);
}

function enableMobileMode() {
    console.log("Mobile mode enabled");
    document.body.addEventListener('click', handleDesktopClick);
}


function updateNoChangeZone() {
// Si Ã©cran mobile, on ne calcule rien pour laisser le swipe libre
    if (window.innerWidth <= 768) return;

    const textArea = document.getElementById('text-area');
    const noChangeZone = document.getElementById('no-change');

    const rect = textArea.getBoundingClientRect();
    noChangeZone.style.left = rect.left + 'px';
    noChangeZone.style.top = rect.top + 'px';
    noChangeZone.style.width = rect.width + 'px';
    noChangeZone.style.height = rect.height + 'px';
}

function handleDesktopClick(event) {
    const excludedAreas = ['no-change', 'info-btn'];

    const isExcluded = excludedAreas.some(areaId => {
        const element = document.getElementById(areaId);
        return element && element.contains(event.target);
    });

    if (isExcluded) return;

    const screenWidth = window.innerWidth;
    const clickX = event.clientX;

    if (clickX < screenWidth / 2) {
        currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
    } else {
        currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
    }

    updateContent();
}


function handleDesktopKeyboard(event) {
    if (event.key === 'ArrowRight') {
        currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
    } else if (event.key === 'ArrowLeft') {
        currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
    }
    updateContent();
}


if (IS_MOBILE) {
    enableMobileMode();
} else {
    enableDesktopMode();
    preloadedImages = preloadImages(imagesToPreload);
}

// Initial content
updateContent();

// Update no-change zone on window resize
window.addEventListener('resize', updateNoChangeZone);

    </script>
</body>
</html>
