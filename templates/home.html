<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marceau JACQUIN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
    
        .container {
            position: relative;
            width: 100vw; /* Prend toute la largeur de la fenêtre */
            height: 100vh; /* Prend toute la hauteur de la fenêtre */
            overflow: hidden; /* Empêche le débordement de l'image */
            display: flex; /* Utilisation du flexbox pour centrer le contenu */
            justify-content: center;
            align-items: center;
        }
        .text-nom { /*"Marceau Jacquin"*/
            position: absolute;
            display: flex;
            top: 1vw;
            left: 1vw;
            align-items: left; 
            z-index: 3;
        }
        .text-area { 
            position: absolute;
            bottom: 1vw;
            left: 1vw;
            max-width: 500px;            
            align-items: end;
        }
        .no-change {
            position: absolute;
            z-index: 10;
            cursor: pointer;
            background-color: transparent; /* Rendre la zone de protection invisible */
        }

        .clickable-area {
            position: fixed; /* Positionne l'élément de manière fixe */
            top: 0px; /* Distance du haut de la page */
            right: 0px; /* Distance du bord droit de la page */
            width: 12%;
            height: 17%;
            text-align: end;
            line-height: 100px;
            cursor: pointer;
            z-index: 10; /* Assure que l'élément est au-dessus d'autres éléments */
        }

        .text-info {/*"Projects/info"*/
            position: absolute;
            display: flex;
            top: 1vw;
            right: 1vw;
            align-items: right;
            font-size: 16px;
            z-index: 3;
        }

        .textinfo p {
            margin: 0;
        }
        .text-nom, .text-area, .text-info {
            /* Empêche la sélection du texte */
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none;      /* IE 10+ */
            user-select: none;          /* Standard (Chrome, Firefox, Opera) */
            
            /* Empêche aussi le menu contextuel "Copier" sur certains mobiles */
            -webkit-touch-callout: none; 
        }

        /* Ce code ne s'appliquera que si l'écran fait moins de 768px */
        @media (max-width: 768px) {
            /* Suppression de la zone de blocage sur mobile */
            .no-change {
                display: none !important;
            }

            /* Container flexible */
            .container {
                height: 100dvh;
                width: 100vw;
            }

            .container img {
                max-width: 100%;
                max-height: 100%;
                width: auto;
                height: auto;
                object-fit: contain;
            }

            .text-info {
                top: 5vw;
                right: 5vw;
                font-size: 14px;
            }

            /* Zone cliquable invisible : plus grande pour le confort tactile */
            .clickable-area {
                width: 25%;       /* Un quart de la largeur de l'écran max */
                max-width: 120px;
                height: 15%;      /* S'aligne sur la hauteur de la box info */
                max-height: 60px;
            }

            /* Box TEXTE IMAGE (Bas gauche) */
            .text-area {
                bottom: 15vw;
                left: 5vw;
                width: auto;
                height: auto;
                font-size: 14px;
            }
            .text-nom {
                top: 5vw;
                left: 5vw;
                font-size: 14px;
            }
            .container {
                height: 100dvh;
                width: 100vw;
                overflow: hidden;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .container img {
                /* On tourne l'image */
                transform: rotate(90deg);
                /* ATTENTION : Comme l'image est tourné, 
                sa hauteur devient sa largeur et inversement.
                On utilise vh pour la largeur et vw pour la hauteur. */
                width: auto;
                height: auto;
                max-width: 95vh;  /* Limite la "largeur" (qui est la hauteur réelle de l'image) */
                max-height: 95vw; /* Limite la "hauteur" (qui est la largeur réelle de l'image) */
                object-fit: contain;
                pointer-events: none; /* Important pour le swipe */
            }
}
    </style>
</head>
<body>
    <div class="container" id="image-container">
        <img id="image" src="{{ url_for('static', filename='images/example1.jpg') }}" alt="Example Image" draggable="false">

        <div class="text-area" id="text-area">Texte de l'image 1</div> 
    </div>
    <div class="no-change" id="no-change"></div>
    <div class="clickable-area" id="info-btn" onclick="redirectToPage()"></div>
        <div class="text-info" id="text-info">Info</div>
        <div class="text-nom" id="text-nom">Marceau Jacquin</div>

    <script>
    function isMobileDevice() {
            return window.matchMedia("(pointer: coarse)").matches;
        }
        
        const IS_MOBILE = isMobileDevice();

        let touchStartX = 0;

        let touchEndX = 0;

        let currentIndex = 0;

        let preloadedImages = [];

        const imagesToPreload = [
            "{{ url_for('static', filename='images/richardmille1.jpg') }}",
            "{{ url_for('static', filename='images/richardmille2.jpg') }}",
            "{{ url_for('static', filename='images/richardmille3.jpg') }}",
            "{{ url_for('static', filename='images/richardmille4.jpg') }}",
            "{{ url_for('static', filename='images/richardmille5.jpg') }}",
            "{{ url_for('static', filename='images/richardmille6.jpg') }}",
            "{{ url_for('static', filename='images/petith1.jpg') }}",
            "{{ url_for('static', filename='images/petith2.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana1.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana2.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana3.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana4.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana5.jpg') }}",
            "{{ url_for('static', filename='images/hotelhana6.jpg') }}",
            "{{ url_for('static', filename='images/destael1.jpg') }}",
            "{{ url_for('static', filename='images/destael2.jpg') }}",
            "{{ url_for('static', filename='images/destael3.jpg') }}",
            "{{ url_for('static', filename='images/destael4.jpg') }}",
            "{{ url_for('static', filename='images/destael5.jpg') }}",
            "{{ url_for('static', filename='images/destael6.jpg') }}",
            "{{ url_for('static', filename='images/victoire1.jpg') }}",
            "{{ url_for('static', filename='images/echec1.jpg') }}",
            "{{ url_for('static', filename='images/echec2.jpg') }}",
            "{{ url_for('static', filename='images/echec3.jpg') }}",
            "{{ url_for('static', filename='images/echec4.jpg') }}",
            "{{ url_for('static', filename='images/echec5.jpg') }}",
            "{{ url_for('static', filename='images/echec6.jpg') }}",
            "{{ url_for('static', filename='images/echec7.jpg') }}",
            "{{ url_for('static', filename='images/token1.jpg') }}",
            "{{ url_for('static', filename='images/token2.jpg') }}",
            "{{ url_for('static', filename='images/token3.jpg') }}",
            "{{ url_for('static', filename='images/token4.jpg') }}",
            "{{ url_for('static', filename='images/poster1.jpg') }}",
            "{{ url_for('static', filename='images/poster2.jpg') }}",
            "{{ url_for('static', filename='images/tag1.jpg') }}",
            "{{ url_for('static', filename='images/tag2.jpg') }}",
            "{{ url_for('static', filename='images/tag3.jpg') }}",
            "{{ url_for('static', filename='images/tag4.jpg') }}",
            "{{ url_for('static', filename='images/tag5.jpg') }}",
            "{{ url_for('static', filename='images/tag6.jpg') }}",
            "{{ url_for('static', filename='images/tag7.jpg') }}",
            "{{ url_for('static', filename='images/fromabove1.jpg') }}",
            "{{ url_for('static', filename='images/yvonlambert1.jpg') }}",
            "{{ url_for('static', filename='images/lagon1.jpg') }}",
            "{{ url_for('static', filename='images/lagon2.jpg') }}",
            "{{ url_for('static', filename='images/rebecq1.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire1.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire2.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire3.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire4.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire5.jpg') }}",
            "{{ url_for('static', filename='images/vernaculaire6.jpg') }}",
            "{{ url_for('static', filename='images/cover1.jpg.jpg') }}",
        ];

        const images = [
            {
                src: "{{ url_for('static', filename='images/richardmille1.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class : "img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille2.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille3.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille4.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille5.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/richardmille6.jpg') }}",
                text: "Richard Mille\nTypedesign for the brand identity\n(w Police Studio)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/petith1.jpg') }}",
                text: "Hotel Hana\nLogo, assets art direction and design\n(w Jersey / Olivier Leon)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/petith2.jpg') }}",
                text: "Hotel Hana\nLogo, assets art direction and design\n(w Jersey / Olivier Leon)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana1.jpg') }}",
                text: "Hotel Hana\nLogo, assets art direction and design\n(w Jersey / Olivier Leon)",
                class :"img-white-HB" // a changée spécial 9 
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana2.jpg') }}",
                text: "Hotel Hana\nLogo, assets art direction and design\n(w Jersey / Olivier Leon)",
                class :"img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana3.jpg') }}",
                text: "Musé de l'Armée\nArt exhibition posters campaign\n(w Oficina / Elisa Manya)",
                class :"img-11",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana4.jpg') }}",
                text: "Deadline\nPosters for an exhibition",
                class :"img-12" //spé 12
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana5.jpg') }}",
                text: "Deadline\nPosters for an exhibition",
                class :"img-12" // spé 12
            },
            {
                src: "{{ url_for('static', filename='images/hotelhana6.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael1.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class : "img-black",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael2.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black-cover",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael3.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael4.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael5.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/destael6.jpg') }}",
                text: '"Formes Graffitiques"\nMultimedia project',
                class :"img-black-cover",
            },
            {
                src: "{{ url_for('static', filename='images/victoire1.jpg') }}",
                text: "From above vil. 03\nVinyl cover design for Lumière noire\n(w Dune Lunel Studio)",
                class : "img-21"
            },
            {
                src: "{{ url_for('static', filename='images/echec1.jpg') }}",
                text: '"A story of Art"\nBook cover design\n(w Dune Lunel Studio)',
                class : "img-white-HB"
            },
            {
                src: "{{ url_for('static', filename='images/echec2.jpg') }}",
                text: "Texte de l'imag 23",
                class : "img-black-cover",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/echec3.jpg') }}",
                text: "Texte de l'imag 24",
                class : "img-black-cover",
                textClass : "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/echec4.jpg') }}",
                text: "Token\nA neomedieval typeface\nTypedesign\n(w Mathis Brosseau)"
            },
            {
                src: "{{ url_for('static', filename='images/echec5.jpg') }}",
                text: "Token\nA neomedieval typeface\nTypedesign\n(w Mathis Brosseau)",
                class : "img-26"

            },
            {
                src: "{{ url_for('static', filename='images/echec6.jpg') }}",
                text: "Token\nA neomedieval typeface\nTypedesign\n(w Mathis Brosseau)"
            },
            {
                src: "{{ url_for('static', filename='images/echec7.jpg') }}",
                text: "Token\nA neomedieval typeface\nTypedesign\n(w Mathis Brosseau)",
                class : "img-28"
            },
            {
                src: "{{ url_for('static', filename='images/token1.jpg') }}",
                text: "Torrent, lagon revue 5\nFlyer and logo design",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/token2.jpg') }}",
                text: "Torrent, lagon revue 5\nFlyer and logo design",
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/token3.jpg') }}",
                text: "Andrea Crew, Maroussia Rebecq\nManifesto poster for JAD museum\n(w Dune Lunel Studio)",
                class : "img-12"
            },
            {
                src: "{{ url_for('static', filename='images/token4.jpg') }}",
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/poster1.jpg') }}",                
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/poster2.jpg') }}",
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag1.jpg') }}",
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black-cover",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag2.jpg') }}",
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag3.jpg') }}",
                text: '"La Bête & la Belle"\nThesis on vernacular typography\nBookdesign\n(w Elisa Manya)',
                class :"img-black-cover",
                textClass: "text-white"
            },
            {
                src: "{{ url_for('static', filename='images/tag4.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            },
            {
                src: "{{ url_for('static', filename='images/tag5.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            },
            {
                src: "{{ url_for('static', filename='images/tag6.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            },
            {
                src: "{{ url_for('static', filename='images/tag7.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            },            
            {
                src: "{{ url_for('static', filename='images/fromabove1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/yvonlambert1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/lagon1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/lagon2.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/rebecq1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire2.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire3.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire4.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire5.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/vernaculaire6.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
            {
                src: "{{ url_for('static', filename='images/cover1.jpg') }}",
                text: "Lumière Noire records\nAlbum cover design\n(w Dune Lunel Studio)",
                class : "img-album"
            }, 
       ];

        function updateContent() {
            const image = images[currentIndex];
            const imageElement = document.getElementById('image');
            const textArea = document.getElementById('text-area');
            const textnom = document.getElementById('text-nom');
            const textContainer = document.getElementById('text-info');

            // Nettoyage du handler précédent (important)
            imageElement.onload = null;

            imageElement.onload = function () {

                // Reset classes image
                imageElement.className = '';
                if (image.class) {
                    imageElement.classList.add(image.class);
                }

                // Reset classes texte
                textArea.className = 'text-area';
                textnom.className = 'text-nom';
                textContainer.className = 'text-info';

                if (image.textClass) {
                    textArea.classList.add(image.textClass);
                    textnom.classList.add(image.textClass);
                    textContainer.classList.add(image.textClass);
                }

                // Background
                if (image.class === "img-black") {
                    document.body.style.backgroundColor = "black";
                } else {
                    document.body.style.backgroundColor = "";
                }

                // Zones & preload
                updateNoChangeZone();
                if (IS_MOBILE) {
                    preloadSurroundingImages(currentIndex, 2);
                }
            };

            // Déclenche le chargement APRES avoir défini onload
            imageElement.src = image.src;
            textArea.innerText = image.text;
        }


        function loadContent(section) {
            const contentDiv = document.getElementById('content');
            if (section === 'info') {
                contentDiv.innerHTML = '<h1>Section Info</h1><p>Contenu de la section Info.</p>';
            } else if (section === 'home') {
                contentDiv.innerHTML = '<h1>Section Home</h1><p>Contenu de la section Home.</p>';
            }
        }

        function redirectToPage() {
            window.location.href = "{{ url_for('info') }}";
        }

        function preloadImages(imageUrls) {
            return imageUrls.map(url => {
                const img = new Image();
                img.src = url;
                return img;
            });
        }
        
        function preloadSurroundingImages(index, count = 2) {
            const indices = [];
            for (let i = 1; i <= count; i++) {
                indices.push((index + i) % images.length);
            }

            indices.forEach(i => {
                const img = new Image();
                img.src = images[i].src;
            });
        }



function enableDesktopMode() {
    console.log("Desktop mode enabled");

    // clic gauche / droite
    document.body.addEventListener('click', handleDesktopClick);

    // clavier
    document.addEventListener('keydown', handleDesktopKeyboard);
}

function enableMobileMode() {
    console.log("Mobile mode enabled");
    document.body.addEventListener('click', handleDesktopClick);
}


function updateNoChangeZone() {
// Si écran mobile, on ne calcule rien pour laisser le swipe libre
    if (window.innerWidth <= 768) return;

    const textArea = document.getElementById('text-area');
    const noChangeZone = document.getElementById('no-change');

    const rect = textArea.getBoundingClientRect();
    noChangeZone.style.left = rect.left + 'px';
    noChangeZone.style.top = rect.top + 'px';
    noChangeZone.style.width = rect.width + 'px';
    noChangeZone.style.height = rect.height + 'px';
}

function handleDesktopClick(event) {
    const excludedAreas = ['no-change', 'info-btn'];

    const isExcluded = excludedAreas.some(areaId => {
        const element = document.getElementById(areaId);
        return element && element.contains(event.target);
    });

    if (isExcluded) return;

    const screenWidth = window.innerWidth;
    const clickX = event.clientX;

    if (clickX < screenWidth / 2) {
        currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
    } else {
        currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
    }

    updateContent();
}


function handleDesktopKeyboard(event) {
    if (event.key === 'ArrowRight') {
        currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
    } else if (event.key === 'ArrowLeft') {
        currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
    }
    updateContent();
}


if (IS_MOBILE) {
    enableMobileMode();
} else {
    enableDesktopMode();
    preloadedImages = preloadImages(imagesToPreload);
}

// Initial content
updateContent();

// Update no-change zone on window resize
window.addEventListener('resize', updateNoChangeZone);

    </script>
</body>
</html>
